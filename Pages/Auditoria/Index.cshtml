@page
@model form.Pages.Auditoria.IndexModel

<h2>Historial de Auditoría</h2>

@if (HttpContext.Session.GetString("rol") == "Administrador")
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Usuario</th>
                <th>Acción</th>
                <th>Entidad</th>
                <th>EntidadId</th>
                <th>Fecha</th>
                <th></th> <!-- Columna para acciones -->
            </tr>
        </thead>
        <tbody>
            @foreach (var registro in Model.Registros)
            {
                <tr>
                    <td>@registro.Usuario</td>
                    <td>@registro.Accion</td>
                    <td>@registro.Entidad</td>
                    <td>@registro.EntidadId</td>
                    <td>@registro.Fecha</td>
                    <td>
                        <!-- Botón para ver detalle -->
                        <a asp-page="/Auditoria/Detalle" asp-route-id="@registro.Id" class="btn btn-sm btn-outline-primary">
                            Ver
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-danger">
        No tienes permisos para acceder a esta página.
    </div>
}

<div>
    <a asp-page="/Index" class="btn btn-danger">Volver</a>
</div>